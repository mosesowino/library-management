(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[495],{747:(e,s,t)=>{"use strict";t.d(s,{A:()=>g});var l=t(5155),a=t(2115),r=t(7649),o=t(9434),n=t(285);let d=r.bL;r.l9;let i=r.ZL,c=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(r.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a,ref:s})});c.displayName=r.hJ.displayName;let h=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsxs)(i,{children:[(0,l.jsx)(c,{}),(0,l.jsx)(r.UC,{ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a})]})});h.displayName=r.UC.displayName;let x=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};x.displayName="AlertDialogHeader";let u=e=>{let{className:s,...t}=e;return(0,l.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t})};u.displayName="AlertDialogFooter";let m=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(r.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold",t),...a})});m.displayName=r.hE.displayName;let p=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(r.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",t),...a})});p.displayName=r.VY.displayName;let j=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(r.rc,{ref:s,className:(0,o.cn)((0,n.r)(),t),...a})});j.displayName=r.rc.displayName;let f=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(r.ZD,{ref:s,className:(0,o.cn)((0,n.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...a})});function g(e){let{title:s,description:t,onConfirm:a,onCancel:r}=e;return(0,l.jsx)(d,{open:!0,onOpenChange:e=>!e&&r(),children:(0,l.jsxs)(h,{children:[(0,l.jsxs)(x,{children:[(0,l.jsx)(m,{children:s}),(0,l.jsx)(p,{children:t})]}),(0,l.jsxs)(u,{children:[(0,l.jsx)(f,{children:"Cancel"}),(0,l.jsx)(j,{onClick:a,children:"Continue"})]})]})})}f.displayName=r.ZD.displayName},3843:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var l=t(5155),a=t(2115),r=t(285),o=t(6695),n=t(2523),d=t(5057);function i(e){let{onAction:s}=e,[t,i]=(0,a.useState)(""),[c,h]=(0,a.useState)(!0),[x,u]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[j,f]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),N=async e=>{if(s(e),"add"===e)try{let e=await fetch("/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x,author:m,copies:j,fee:g,issued:0})}),s=await e.json();i(s.message||"Book added successfully!"),h(!1),u(""),p(""),f(""),b("")}catch(e){i("Error adding book."),h(!1)}};return(0,l.jsxs)(o.Zp,{className:"w-[350px] mx-auto",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(o.ZB,{children:"Add New Book"}),(0,l.jsx)(o.BT,{children:"Book Id is generated for you"})]}),(0,l.jsx)(o.Wu,{children:c?(0,l.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,l.jsx)("div",{className:"grid w-full items-center gap-4",children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsx)(d.J,{htmlFor:"book-title",children:"Title"}),(0,l.jsx)(n.p,{id:"book-title",placeholder:"Book Title",value:x,onChange:e=>u(e.target.value)}),(0,l.jsx)(d.J,{htmlFor:"book-author",children:"Author"}),(0,l.jsx)(n.p,{id:"book-author",placeholder:"Author",value:m,onChange:e=>p(e.target.value)}),(0,l.jsx)(d.J,{htmlFor:"book-copies",children:"Number of copies"}),(0,l.jsx)(n.p,{id:"book-copies",placeholder:"Number of copies",value:j,onChange:e=>f(e.target.value)}),(0,l.jsx)(d.J,{htmlFor:"book-fee",children:"Fee"}),(0,l.jsx)(n.p,{id:"book-fee",placeholder:"Fee",value:g,onChange:e=>b(e.target.value)})]})})}):(0,l.jsx)("p",{className:"text-green-600",children:t})}),(0,l.jsxs)(o.wL,{className:"flex justify-between",children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>N("cancel"),children:"Cancel"}),c&&(0,l.jsx)(r.$,{onClick:()=>N("add"),children:"Add"})]})]})}},5057:(e,s,t)=>{"use strict";t.d(s,{J:()=>i});var l=t(5155),a=t(2115),r=t(968),o=t(3243),n=t(9434);let d=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=a.forwardRef((e,s)=>{let{className:t,...a}=e;return(0,l.jsx)(r.b,{ref:s,className:(0,n.cn)(d(),t),...a})});i.displayName=r.b.displayName},6126:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var l=t(5155);t(2115);var a=t(3243),r=t(9434);let o=(0,a.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:s,variant:t,...a}=e;return(0,l.jsx)("div",{className:(0,r.cn)(o({variant:t}),s),...a})}},7050:(e,s,t)=>{Promise.resolve().then(t.bind(t,8317))},8317:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>M});var l=t(5155),a=t(6874),r=t.n(a),o=t(7340),n=t(4177),d=t(2548),i=t(9249),c=t(381),h=t(2432),x=t(6697),u=t(7924),m=t(9103),p=t(5623),j=t(6126),f=t(9018),g=t(285),b=t(6695),N=t(4838),w=t(2523),y=t(8382),v=t(5127),k=t(7313),C=t(6102),T=t(2115),A=t(3843),S=t(9980),D=t(3464),_=t(747);function M(){let[e,s]=(0,T.useState)([]),[t,a]=(0,T.useState)(!1),[M,B]=(0,T.useState)(!1),[F,E]=(0,T.useState)(),[I,J]=(0,T.useState)(!1),R=async()=>{try{let e=await D.A.get("/books");e&&e.data&&s(e.data)}catch(e){console.error("Failed to fetch books:",e)}};(0,T.useEffect)(()=>{R()},[]);let z=e=>{console.log("Action chosen:",e),"edit"===e[0]?(E({title:e[1],author:e[2],cost_per_day:e[3],total_copies:e[4],id:e[5]}),console.log("current book",null==F?void 0:F.id),B(!0)):"delete"===e[0]&&(E({title:e[1],author:e[2],cost_per_day:e[3],total_copies:e[4],id:e[5]}),J(!0))},Z=async()=>{if(null==F?void 0:F.id){console.log("The id of this book bana, ",null==F?void 0:F.id);try{(await fetch("/books/delete/".concat(null==F?void 0:F.id),{method:"DELETE"})).ok?(console.log("Book deleted successfully"),R()):console.error("Failed to delete book")}catch(e){console.error("Error deleting book:",e)}finally{J(!1)}}};return(0,l.jsxs)("div",{className:"flex min-h-screen w-full flex-col bg-slate-800",children:[(0,l.jsxs)("aside",{className:"fixed inset-y-0 left-0 z-10 hidden w-14 flex-col border-r bg-background sm:flex",children:[(0,l.jsxs)("nav",{className:"flex flex-col items-center gap-4 px-2 sm:py-5",children:[(0,l.jsx)(C.TooltipProvider,{children:(0,l.jsxs)(C.Tooltip,{children:[(0,l.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,l.jsxs)(r(),{href:"/",className:"flex h-9 w-9 items-center justify-center rounded-lg text-muted-foreground transition-colors hover:text-foreground md:h-8 md:w-8",children:[(0,l.jsx)(o.A,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Dashboard"})]})}),(0,l.jsx)(C.TooltipContent,{side:"right",children:"Dashboard"})]})}),(0,l.jsx)(C.TooltipProvider,{children:(0,l.jsxs)(C.Tooltip,{children:[(0,l.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,l.jsxs)(r(),{href:"books/issued",className:"flex h-9 w-9 items-center justify-center rounded-lg text-muted-foreground transition-colors hover:text-foreground md:h-8 md:w-8",children:[(0,l.jsx)(n.A,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Issued"})]})}),(0,l.jsx)(C.TooltipContent,{side:"right",children:"Issued"})]})}),(0,l.jsx)(C.TooltipProvider,{children:(0,l.jsxs)(C.Tooltip,{children:[(0,l.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,l.jsxs)(r(),{href:"/books",className:"flex h-9 w-9 items-center justify-center rounded-lg bg-accent text-muted-foreground transition-colors hover:text-foreground md:h-8 md:w-8",children:[(0,l.jsx)(d.A,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"books"})]})}),(0,l.jsx)(C.TooltipContent,{side:"right",children:"books"})]})}),(0,l.jsx)(C.TooltipProvider,{children:(0,l.jsxs)(C.Tooltip,{children:[(0,l.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,l.jsxs)(r(),{href:"/members",className:"flex h-9 w-9 items-center justify-center rounded-lg text-muted-foreground transition-colors hover:text-foreground md:h-8 md:w-8",children:[(0,l.jsx)(i.A,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Members"})]})}),(0,l.jsx)(C.TooltipContent,{side:"right",children:"Members"})]})})]}),(0,l.jsx)("nav",{className:"mt-auto flex flex-col items-center gap-4 px-2 sm:py-5",children:(0,l.jsx)(C.TooltipProvider,{children:(0,l.jsxs)(C.Tooltip,{children:[(0,l.jsx)(C.TooltipTrigger,{asChild:!0,children:(0,l.jsxs)(r(),{href:"#",className:"flex h-9 w-9 items-center justify-center rounded-lg text-muted-foreground transition-colors hover:text-foreground md:h-8 md:w-8",children:[(0,l.jsx)(c.A,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Settings"})]})}),(0,l.jsx)(C.TooltipContent,{side:"right",children:"Settings"})]})})})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:gap-4 sm:py-4 sm:pl-14",children:[(0,l.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-background px-4 sm:static sm:h-auto sm:border-0 sm:bg-transparent sm:px-6",children:[(0,l.jsxs)(y.Sheet,{children:[(0,l.jsx)(y.SheetTrigger,{asChild:!0,children:(0,l.jsxs)(g.$,{size:"icon",variant:"outline",className:"sm:hidden",children:[(0,l.jsx)(h.A,{className:"h-5 w-5"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,l.jsx)(y.SheetContent,{side:"left",className:"sm:max-w-xs",children:(0,l.jsxs)("nav",{className:"grid gap-6 text-lg font-medium",children:[(0,l.jsxs)(r(),{href:"/",className:"flex items-center gap-4 px-2.5 text-muted-foreground hover:text-foreground",children:[(0,l.jsx)(o.A,{className:"h-5 w-5"}),"Home"]}),(0,l.jsxs)(r(),{href:"#",className:"flex items-center gap-4 px-2.5 text-muted-foreground hover:text-foreground",children:[(0,l.jsx)(n.A,{className:"h-5 w-5"}),"Issued"]}),(0,l.jsxs)(r(),{href:"/books",className:"flex items-center gap-4 px-2.5 text-foreground",children:[(0,l.jsx)(d.A,{className:"h-5 w-5"}),"books"]}),(0,l.jsxs)(r(),{href:"/members",className:"flex items-center gap-4 px-2.5 text-muted-foreground hover:text-foreground",children:[(0,l.jsx)(i.A,{className:"h-5 w-5"}),"Members"]}),(0,l.jsxs)(r(),{href:"#",className:"flex items-center gap-4 px-2.5 text-muted-foreground hover:text-foreground",children:[(0,l.jsx)(x.A,{className:"h-5 w-5"}),"Settings"]})]})})]}),(0,l.jsx)(f.Qp,{className:"hidden md:flex",children:(0,l.jsxs)(f.AB,{children:[(0,l.jsx)(f.J5,{children:(0,l.jsx)(f.w1,{asChild:!0,children:(0,l.jsx)(r(),{href:"/",children:"Dashboard"})})}),(0,l.jsx)(f.tH,{}),(0,l.jsx)(f.J5,{children:(0,l.jsx)(f.w1,{asChild:!0,children:(0,l.jsx)(r(),{href:"#",children:"books"})})}),(0,l.jsx)(f.tH,{}),(0,l.jsx)(f.J5,{children:(0,l.jsx)(f.tJ,{children:"All books"})})]})}),(0,l.jsxs)("div",{className:"relative ml-auto flex-1 md:grow-0",children:[(0,l.jsx)(u.A,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,l.jsx)(w.p,{type:"search",placeholder:"Search...",className:"w-full rounded-lg bg-background pl-8 md:w-[200px] lg:w-[336px]"})]}),(0,l.jsxs)(N.DropdownMenu,{children:[(0,l.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsx)(g.$,{variant:"outline",size:"icon",className:"overflow-hidden rounded-full",children:"A"})}),(0,l.jsxs)(N.DropdownMenuContent,{align:"end",children:[(0,l.jsx)(N.DropdownMenuLabel,{children:"My Account"}),(0,l.jsx)(N.DropdownMenuSeparator,{}),(0,l.jsx)(N.DropdownMenuItem,{children:"Settings"}),(0,l.jsx)(N.DropdownMenuItem,{children:"Support"}),(0,l.jsx)(N.DropdownMenuSeparator,{}),(0,l.jsx)(N.DropdownMenuItem,{children:"Logout"})]})]})]}),(0,l.jsx)("main",{className:"grid flex-1 items-start gap-4 p-4 sm:px-6 sm:py-0 md:gap-8",children:(0,l.jsxs)(k.Tabs,{defaultValue:"all",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("div",{className:"ml-auto flex items-center gap-2",children:(0,l.jsx)(g.$,{size:"sm",className:"h-8 gap-1",onClick:()=>a(!t),children:t?(0,l.jsx)("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"show books"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m.A,{className:"h-3.5 w-3.5"}),(0,l.jsx)("span",{className:"sr-only sm:not-sr-only sm:whitespace-nowrap",children:"Add Book"})]})})})}),(0,l.jsx)(k.TabsContent,{value:"all",children:t?(0,l.jsx)(A.default,{onAction:e=>{"add"===e?(console.log("add book"),R(),setTimeout(()=>a(!1),5e3)):"cancel"===e&&(console.log("cancel add action"),a(!1))}}):M?(0,l.jsx)(S.default,{onAction:e=>{console.log("Action chosen:",e),"update"===e?(console.log("update book"),R(),setTimeout(()=>B(!1),5e3)):"cancel"===e&&(console.log("cancel update action"),B(!1))},book:F}):(0,l.jsxs)(b.Zp,{"x-chunk":"dashboard-06-chunk-0",children:[(0,l.jsxs)(b.aR,{children:[(0,l.jsx)(b.ZB,{children:"books"}),(0,l.jsx)(b.BT,{children:"Manage your books."})]}),(0,l.jsx)(b.Wu,{children:(0,l.jsxs)(v.XI,{children:[(0,l.jsx)(v.A0,{children:(0,l.jsxs)(v.Hj,{children:[(0,l.jsx)(v.nd,{children:"Title"}),(0,l.jsx)(v.nd,{children:"Book Id"}),(0,l.jsx)(v.nd,{children:"Status"}),(0,l.jsx)(v.nd,{className:"hidden md:table-cell",children:"Rent fee(ksh)"}),(0,l.jsx)(v.nd,{className:"hidden md:table-cell",children:"quantity"}),(0,l.jsx)(v.nd,{className:"hidden md:table-cell",children:"Issued"}),(0,l.jsx)(v.nd,{children:(0,l.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,l.jsx)(v.BF,{children:e?e.map(e=>(0,l.jsxs)(v.Hj,{children:[(0,l.jsx)(v.nA,{className:"font-medium",children:(0,l.jsx)("p",{className:"font-bold",children:e.title})}),(0,l.jsx)(v.nA,{children:e.id}),(0,l.jsx)(v.nA,{children:(0,l.jsx)(j.E,{variant:"outline",children:e.total_copies<=e.issued_copies?(0,l.jsx)("p",{className:"text-amber-400",children:"not available"}):(0,l.jsx)("p",{className:"text-green-400",children:"available"})})}),(0,l.jsx)(v.nA,{className:"hidden md:table-cell",children:e.cost_per_day}),(0,l.jsx)(v.nA,{className:"hidden md:table-cell",children:e.total_copies}),(0,l.jsx)(v.nA,{className:"hidden md:table-cell",children:e.issued_copies}),(0,l.jsx)(v.nA,{children:(0,l.jsxs)(N.DropdownMenu,{children:[(0,l.jsx)(N.DropdownMenuTrigger,{asChild:!0,children:(0,l.jsxs)(g.$,{"aria-haspopup":"true",size:"icon",variant:"ghost",children:[(0,l.jsx)(p.A,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,l.jsxs)(N.DropdownMenuContent,{align:"end",children:[(0,l.jsx)(N.DropdownMenuLabel,{children:"Actions"}),(0,l.jsx)(N.DropdownMenuItem,{onClick:()=>z(["edit",e.title,e.author,e.cost_per_day,e.available_copies,e.id]),children:"Edit"}),(0,l.jsx)(N.DropdownMenuItem,{onClick:()=>z(["delete",e.title,e.author,e.cost_per_day,e.available_copies,e.id]),children:"Delete"})]})]})})]},e.id)):""})]})}),(0,l.jsx)(b.wL,{children:I&&(0,l.jsx)(_.A,{title:"Delete Book?",description:"Are you sure you want to delete ".concat(null==F?void 0:F.title,"?"),onConfirm:Z,onCancel:()=>J(!1)})})]})})]})})]})]})}},9980:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var l=t(5155),a=t(2115),r=t(285),o=t(6695),n=t(2523);function d(e){let{onAction:s,book:t}=e,[d,i]=(0,a.useState)(""),[c,h]=(0,a.useState)(""),[x,u]=(0,a.useState)(""),[m,p]=(0,a.useState)(""),[j,f]=(0,a.useState)(""),[g,b]=(0,a.useState)(!0),N=async e=>{if(s(e),"update"===e){let e={};if(d&&(e.title=d),c&&(e.author=c),x&&(e.copies=parseInt(x)),m&&(e.fee=parseFloat(m)),0===Object.keys(e).length)return void f("Please fill at least one field to update.");try{console.log("book ID ya hii kitabu",t.id);let s=await fetch("/books/".concat(t.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l=await s.json();f(l.message||"Book updated successfully!"),b(!1)}catch(e){f("Failed to update book."),b(!1)}}};return(0,l.jsxs)(o.Zp,{className:"w-[350px] mx-auto",children:[(0,l.jsxs)(o.aR,{children:[(0,l.jsx)(o.ZB,{children:"Update Book"}),(0,l.jsx)(o.BT,{children:"Only fill the fields you wish to update"})]}),(0,l.jsxs)(o.Wu,{children:[(0,l.jsxs)(o.Zp,{className:"py-4 mb-3 text-center",children:[(0,l.jsxs)("p",{children:["Title: ",null==t?void 0:t.title]}),(0,l.jsxs)("p",{children:["Author: ",null==t?void 0:t.author]})]}),g?(0,l.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,l.jsx)("div",{className:"grid w-full items-center gap-4",children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsx)(n.p,{id:"update-title",placeholder:"New Title",value:d,onChange:e=>i(e.target.value)}),(0,l.jsx)(n.p,{id:"update-author",placeholder:"New Author",value:c,onChange:e=>h(e.target.value)}),(0,l.jsx)(n.p,{id:"update-copies",placeholder:"New Number of Copies",value:x,onChange:e=>u(e.target.value)}),(0,l.jsx)(n.p,{id:"update-fee",placeholder:"New Fee",value:m,onChange:e=>p(e.target.value)})]})})}):(0,l.jsx)("p",{className:"text-green-600",children:j})]}),(0,l.jsxs)(o.wL,{className:"flex justify-between",children:[(0,l.jsx)(r.$,{variant:"outline",onClick:()=>N("cancel"),children:"Cancel"}),g&&(0,l.jsx)(r.$,{onClick:()=>N("update"),children:"Update"})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[105,932,464,518,325,441,684,358],()=>s(7050)),_N_E=e.O()}]);