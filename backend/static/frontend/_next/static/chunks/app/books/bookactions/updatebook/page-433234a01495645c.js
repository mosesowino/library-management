(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{2232:(e,t,a)=>{Promise.resolve().then(a.bind(a,9980))},9980:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var l=a(5155),s=a(2115),i=a(285),n=a(6695),o=a(2523),c=a(3792);function d(e){let{onAction:t,book:a}=e,[d,r]=(0,s.useState)(""),[u,p]=(0,s.useState)(""),[h,x]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[v,g]=(0,s.useState)(""),[m,N]=(0,s.useState)(!0),b=async e=>{if(t(e),"update"===e){let e={};if(d&&(e.title=d),u&&(e.author=u),h&&(e.copies=parseInt(h)),f&&(e.fee=parseFloat(f)),0===Object.keys(e).length)return void g("Please fill at least one field to update.");try{console.log("book ID ya hii kitabu",a.id);let t=await fetch("".concat(c.backendUrl,"/books/").concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),l=await t.json();g(l.message||"Book updated successfully!"),N(!1)}catch(e){g("Failed to update book."),N(!1)}}};return(0,l.jsxs)(n.Zp,{className:"w-[350px] mx-auto",children:[(0,l.jsxs)(n.aR,{children:[(0,l.jsx)(n.ZB,{children:"Update Book"}),(0,l.jsx)(n.BT,{children:"Only fill the fields you wish to update"})]}),(0,l.jsxs)(n.Wu,{children:[(0,l.jsxs)(n.Zp,{className:"py-4 mb-3 text-center",children:[(0,l.jsxs)("p",{children:["Title: ",null==a?void 0:a.title]}),(0,l.jsxs)("p",{children:["Author: ",null==a?void 0:a.author]})]}),m?(0,l.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,l.jsx)("div",{className:"grid w-full items-center gap-4",children:(0,l.jsxs)("div",{className:"flex flex-col space-y-1.5",children:[(0,l.jsx)(o.p,{id:"update-title",placeholder:"New Title",value:d,onChange:e=>r(e.target.value)}),(0,l.jsx)(o.p,{id:"update-author",placeholder:"New Author",value:u,onChange:e=>p(e.target.value)}),(0,l.jsx)(o.p,{id:"update-copies",placeholder:"New Number of Copies",value:h,onChange:e=>x(e.target.value)}),(0,l.jsx)(o.p,{id:"update-fee",placeholder:"New Fee",value:f,onChange:e=>j(e.target.value)})]})})}):(0,l.jsx)("p",{className:"text-green-600",children:v})]}),(0,l.jsxs)(n.wL,{className:"flex justify-between",children:[(0,l.jsx)(i.$,{variant:"outline",onClick:()=>b("cancel"),children:"Cancel"}),m&&(0,l.jsx)(i.$,{onClick:()=>b("update"),children:"Update"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[105,932,464,998,30,441,684,358],()=>t(2232)),_N_E=e.O()}]);